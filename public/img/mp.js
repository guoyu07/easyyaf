!function(t,n){function o(t,n){return d.cleanObj.toString.call(t).slice(8,-1)===n}function e(t,n){for(var o,e,i=t.split(":"),s=i.pop().split("/"),c=d;o=s.shift();)"bdbox"!==o&&(e=o,s.length&&(c=c[o]=c[o]||{}));var u=l[t]={exports:{}},a=d.isFunction(n)?n.apply(u,[r,u.exports,u,d]):n;a&&(u.exports=a),c[e]=u.exports
}function r(t){var n=l[t];if(n)return n.exports;throw"module "+t+" is undefined"}function i(){p.forEach(function(t){t()}),p.length=0,m=!0}function s(t,n,o){if("object"==typeof t){var e,r,i=c(t);if(o=o||t,"array"===i||"arguments"===i||"nodelist"===i){for(e=0,r=t.length;r>e;e++)if(n.call(o,t[e],e,t)===!1)return
}else for(e in t)if(t.hasOwnProperty(e)&&n.call(o,t[e],e,t)===!1)return}}function c(t){var n;return null==t?n=String(t):(n=Object.prototype.toString.call(t).toLowerCase(),n=n.substring(8,n.length-1)),n}var u=+new Date,a=(u+"").slice(-3),f=navigator.userAgent,d={isBox:/ baiduboxapp\//i.test(f),isIOS:/(iPhone|iPod|iPad)/.test(f),isAndroid:/(Android);?\s+([\d.]+)?/.test(f),getId:function(){return a++
},emptyArr:[],emptyFn:function(){},cleanObj:{},byId:function(t){return d.isString(t)?n.getElementById(t):t},toArray:function(t){return d.emptyArr.slice.call(t)},$:function(t,o){return o=o&&1===o.nodeType?o:n,d.toArray(o.querySelectorAll(t))}};"Function,String,Array,Number,RegExp".replace(/[^, ]+/g,function(t){d["is"+t]=function(n){return o(n,t)
}}),d.isBoolean=function(t){return t===!0||t===!1},d.isObject=function(t){return"object"==typeof t},d.isUndefined=function(t){return void 0===t},d.isWindow=function(t){return null!=t&&t==t.window},d.isPlainObject=function(t){return d.isObject(t)&&!d.isWindow(t)&&Object.getPrototypeOf(t)==Object.prototype
};var l={};d.define=e;var h=function(t,n,o){for(var e,r,i=t.split("."),s=o||h;e=i.shift();)"Box"!==e&&(r=e,i.length&&(s=s[e]=s[e]||{}));return s[r]=n||{},s[r]},p=[],m=!1;if(h.init=function(t){return"function"!=typeof t?this:(m?t():p.push(t),this)},"complete,loaded,interactive".indexOf(n.readyState)>-1&&n.body?i():n.addEventListener("DOMContentLoaded",i,!1),e("common:bdbox/utils/getVersion",function(n,o,e){var r=function(){var n=0;
if(t.baiduboxapp_version)n=t.baiduboxapp_version;else{var o,e=navigator.userAgent;(o=/([\d+.]+)_(?:diordna|enohpi)_/.exec(e))?(o=o[1].split("."),n=o.reverse().join(".")):(o=/baiduboxapp\/([\d+.]+)/.exec(e))&&(n=o[1])}return r=function(){return n},n};e.exports=r}),e("common:bdbox/utils/version_compare",function(t,n,o){var e=function(t,n){n+="",t+="";
for(var o=t.split("."),e=n.split("."),r=0,i=Math.max(o.length,e.length);i>r;r++){if(o[r]&&!e[r]&&parseInt(o[r])>0||parseInt(o[r])>parseInt(e[r]))return 1;if(e[r]&&!o[r]&&parseInt(e[r])>0||parseInt(o[r])<parseInt(e[r]))return-1}return 0};o.exports=e}),e("common:bdbox/utils/jsonToQuery",function(t,n,o,e){o.exports=function(t){if(e.isString(t))return t;
var n=[];for(var o in t)n.push(o+"="+t[o]);return n.join("&")}}),e("common:bdbox/io/loadJS",function(o,e,r,i){function s(o,e,r){var s,a,f,d=n.createElement("script");i.isString(o)?(s=o,i.isFunction(e)&&(r=e,e=null)):(s=o.url,e=o.data,r=o.success,a=o.error||i.emptyFn,f=o.timeout),i.isObject(e)&&(e=u(e)),e&&(s+=(-1===s.indexOf("?")?"?":"&")+e),s=s.replace(/[&?]{1,2}/,"?");
var l;/=\?/.test(s)&&(l="_box_jsonp"+i.getId(),s=s.replace(/=\?/,"="+l));var h=c();f=f||2e4,d.type="text/javascript",d.src=s;var p,m=!0,v=function(){l&&delete t[l],p&&clearTimeout(p),d.onload=d.onreadystatechange=d.onerror=null,d=null},b=function(){!d||d.readyState&&!/loaded|complete/.test(d.readyState)||(v(),m&&i.isFunction(r)&&r.apply(null,i.toArray(arguments)),m=!1)
},g=function(t){v(),m&&a(t),m=!1};l&&(t[l]=b),p=setTimeout(function(){v(),m&&a("timeout"),m=!1},f),d.onload=d.onreadystatechange=d.onerror=b,d.onerror=g,h.appendChild(d)}function c(){return n.head||n.getElementsByTagName("head")[0]||n.documentElement}var u=o("common:bdbox/utils/jsonToQuery");i.emptyFn,r.exports=s
}),e("common:bdbox/utils/queryToJson",function(t,n,o){o.exports=function(t){t=t?decodeURIComponent(t):"";var n=t.split("?"),o=n[1]?n[1]:n[0],e=o.split("&"),r={};return e.forEach(function(t){t=t.split("="),t[0].length>0&&(r[t[0]]=t[1]||"")}),r}}),e("common:bdbox/extend",function(t,n,o,e){function r(t,n,o){for(var e in n)o&&(i(n[e])||s(n[e]))?(i(n[e])&&!i(t[e])&&(t[e]={}),s(n[e])&&!s(t[e])&&(t[e]=[]),r(t[e],n[e],o)):u(n[e])||(t[e]=n[e])
}var i=e.isPlainObject,s=e.isArray,c=e.isBoolean,u=e.isUndefined;o.exports=function(t){var n,o=e.emptyArr.slice.call(arguments,1);return c(t)&&(n=t,t=o.shift()),o.forEach(function(o){r(t,o,n)}),t}}),e("common:bdbox/monitor",function(n,o,e,r){var i=encodeURIComponent,s=function(t,n){t+=t.indexOf("?")<0?"?":"&",this.url=t,this.options=n
};s.prototype.report=function(n){n=n||"";var o=new Image(1,1),e=[];if(r.isObject(n)){for(var s in n)e.push(s+"="+i(String(n[s])));n=e.join("&")}var c="_box_mt"+r.getId();t[c]=o,o.onload=o.onerror=o.onabort=function(){o.onload=o.onerror=o.onabort=null,t[c]=o=null};var u=this.url+n;return r.isFunction(this.options.customHandler)&&(u=this.options.customHandler(u)),o.src=u+"&_rnd="+Math.floor(2147483648*Math.random()),this
},s.prototype.main=function(t,n){return t&&r.isFunction(this[t])&&this[t].apply(this,r.toArray(n||[])),this},e.exports=function(t,n){return new s(t,n)}}),e("common:bdbox/monitor/tc",function(t,n,o,e){var r=t("common:bdbox/monitor"),i=t("common:bdbox/extend"),s=t("common:bdbox/utils/queryToJson"),c=t("common:bdbox/utils/getVersion"),u=s(location.search),a=navigator.userAgent,f="//m.baidu.com/tcbox",d={service:"bdbox",action:"pblog",ctv:2,cen:"uid_ua_ut",data:{dataid:"2",actiontype:"1",actionid:"2",actiondata:{ref:u.ref||"",gmv:u.vmgdb||"",source:u.from||u.ref||"",boxVersion:c(),boxPlatform:a.match(/(iPad|iPhone|iPod)/gim)?"ios":"android"}}},l=encodeURIComponent;
u.uid&&u.osname&&["osname","ua","ut","from","cfrom","uid","pkgname"].forEach(function(t){u[t]&&(d[t]=u[t])});var h=r(f,{customHandler:function(t){var n=[];for(var o in d)if(d.hasOwnProperty(o)){var r=d[o];e.isObject(r)&&(r=JSON.stringify(r)),n.push(o+"="+l(r))}return n.length&&(t+=n.join("&")),t}});h.init=function(t){d=t
},h.pv=function(t,n){var o=d.data;o.actionid="1";var e={};return t&&(e.url=t),n&&(e.u=n),o.actiondata=i(o.actiondata,e),h.report()},h.tc=function(t,n){var o=d.data;return o.actionid="2",e.isPlainObject(t)?n=t:o.cateid=t+"",o.actiondata=i(o.actiondata,n),h.report()},h.event=function(t,n,o,e){if(!n)throw"monitor.tc.event need a evtName";
var r={evtName:n,evtType:o||"",evtTag:e||""};return h.tc(t,r)},o.exports=function(){h.main.apply(h,arguments)}}),e("common:bdbox/moplus",function(t,n,o,e){var r=t("common:bdbox/utils/jsonToQuery"),i=t("common:bdbox/io/loadJS"),s=t("common:bdbox/utils/version_compare"),c=t("common:bdbox/monitor/tc"),u="com.baidu.searchbox",a="http://127.0.0.1:6259/",f="http://127.0.0.1:40310/",d="inapp_boxserver",l=500,h=null,p="__moplus_host__",m=1,v={ifSendPv:!1,ifSendEvt:{getHVersion:!1,sendintent:!1},ifHit:!1,setProb:function(t){m=t
},check:function(){var t=!1,n=100,o=m;if(1>o){var e=(o+"").length,r=Math.pow(10,e-2);o*=r,n*=r}var i=parseInt(Math.random()*(n+1));return i>0&&o>=i&&(t=!0),t},parseUA:function(){var t,n,o=navigator.userAgent,e={uc:/UCBrowser\/(\S*) \S*/g,bd:/baidubrowser\/(\S*) \(Baidu/g,qq:/MQQBrowser\/(\S*) Mobile/g,chr:/Chrome\/(\S*) Mobile/g,qh:/360 Aphone Browser \((\S*)\)/g,sg:/SogouMobileBrowser\/(\S*)/g,mi:/MiuiBrowser\/(\S*)/g};
for(var r in e){var i=e[r].exec(o);if(i){t=r,n=i[1];break}}return t=t?t:"other",n=n?n:"0",{t:t,v:n}},parsePro:function(){return"http:"===location.protocol?1:0},parseHost:function(){return b.curHost===f?1:0},sendPv:function(){this.ifHit&&!this.ifSendPv&&(this.ifSendPv=!0,c("pv"))},sendEvt:function(t){if(this.ifHit&&!this.ifSendEvt[t]){this.ifSendEvt[t]=!0;
var n=this.parseUA(),o=n.t,e=n.v,r=this.parsePro(),i=this.parseHost();c("event",["2",t,{brName:o,brVer:e,isHttp:r,isNew:i}])}},init:function(){this.ifHit=this.check(),this.sendPv()}},b=function(t,n,o){this.isHttps="https:"===location.protocol,this.curHost=o||"",this.newHost=f,this.oldHost=this.isHttps?f:a,this.MCMDF=n||d,this._infoFuncs=[],this._verFuncs=[],this.minVersion=t?t:0,this.pkgName=u,v.init()
};b.prototype={constructor:b,setMcmdf:function(t){return this.MCMDF=t,this},setHost:function(t){return this.curHost=t,this.setStorage(p,t),this},getHost:function(){return this.isHttps?(this.curHost=this.newHost,this.newHost):this.getStorage(p)?(this.curHost=this.getStorage(p),this.curHost):void 0},setStorage:function(t,n){sessionStorage.setItem(t,n)
},getStorage:function(t){var n=sessionStorage.getItem(t);return n},api:function(t,n,o,s){if(!t)throw"Moplus.api need an action";e.isFunction(n)&&(s=o,o=n,n={});var c=t+(~t.indexOf("?")?"&":"?")+r(n);if(~c.indexOf("mcmdf")||(c+="&mcmdf="+this.MCMDF),v.sendEvt(t),this.getHost()){c=this.curHost+c;var u={url:c,timeout:s};
e.isFunction(o)?(u.url+="&callback=?",u.success=o,u.error=function(){o({error:33})},i(u)):i(u)}else{var a=this.newHost+c,f=this.oldHost+c;e.isFunction(o)&&(a+="&callback=?",f+="&callback=?");var d={url:a,timeout:s},l={url:f,timeout:s},u={newData:d,oldData:l,success:o};this.request(u)}return this},getInfo:function(t,n){if(h)return t(h);
if(this._infoFuncs.push(t),!(this._infoFuncs.length>1)){var o=this,e=function(t,n){n||(h=t);var e;for(n&&(t={error:33});e=o._infoFuncs.shift();)e(t)};if(this.getHost()){var r={url:this.curHost+"getsearchboxinfo?mcmdf="+this.MCMDF+"&callback=?",success:e,error:function(){e(null,!0)},timeout:n};i(r)}else{var s={url:this.newHost+"getsearchboxinfo?mcmdf="+this.MCMDF+"&callback=?",timeout:n},c={url:this.oldHost+"getsearchboxinfo?mcmdf="+this.MCMDF+"&callback=?",timeout:n},u={newData:s,oldData:c,success:e,error:function(){e(null,!0)
}};this.request(u)}return this}},getHVersion:function(t,n){this._verFuncs.push(t);var o=this;if(!(this._verFuncs.length>1)){var e=function(t){var n;for(t=o.parseInfo(t);n=o._verFuncs.shift();)n(t)};return v.ifSendEvt.sendintent||v.sendEvt("getHVersion"),this.getInfo(e,n),this}},parseInfo:function(t,n){t=t||h,n=n||this.minVersion;
var o=t.package_infos;if(!o||0===o.length)return!1;var e=u,r={offic:{name:u,version:0},oem:{version:0}};return o.forEach(function(t){var o=t.version_name,i=t.package_name;s(o,n)>=0&&(i===e?1===s(o,r.offic.version)&&(r.offic={version:o,name:u}):1===s(o,r.oem.version)&&(r.oem={version:o,name:i}))}),0===r.oem.version&&0===r.offic.version?!1:0!==r.offic.version?r.offic:0!==r.oem.version?r.oem:void 0
},sendIntent:function(t,n,o){if(t&&e.isString(t))if(v.sendEvt("sendintent"),/^http/.test(t)||(t="sendintent?mcmdf="+this.MCMDF+"&callback=?&intent="+encodeURIComponent(t)),this.getHost()){var r={url:this.curHost+t,timeout:o};e.isFunction(n)?(r.success=function(t){t&&0===t.error&&v.sendEvt("sendintentOK"),n(t)
},r.error=function(){n({error:33})}):r.success=function(t){t&&0===t.error&&v.sendEvt("sendintentOK")},i(r)}else{var s=this;this.getHVersion(function(r){if(r&&r.version){var c={url:s.curHost+t,timeout:o};e.isFunction(n)?(c.success=function(t){t&&0===t.error&&v.sendEvt("sendintentOK"),n(t)},c.error=function(){n({error:33})
}):c.success=function(t){t&&0===t.error&&v.sendEvt("sendintentOK")},i(c)}})}return this},request:function(t){if(t&&"object"==typeof t){var n,o,r=this,s=t.newData,c=t.oldData,u=t.success,a=t.error;return s.success=function(t){"success"!==n&&(o&&clearTimeout(o),n="success",r.setHost(r.newHost),e.isFunction(u)&&u(t))
},s.error=function(){"error"===n&&(e.isFunction(a)?a():e.isFunction(u)&&u({error:33})),n="error"},i(s),r.isHttps||(c.success=function(t){"success"!==n&&("error"===n?(n="success",r.setHost(r.oldHost),e.isFunction(u)&&u(t)):o=setTimeout(function(){n="success",r.setHost(r.oldHost),e.isFunction(u)&&u(t)},l))
},c.error=function(){"error"===n&&(e.isFunction(a)?a():e.isFunction(u)&&u({error:33})),n="error"},i(c)),this}}},o.exports=function(t,n){return new b(t,n)},o.exports.Moplus=b}),d.version=d.utils.getVersion(),d.version_compare=d.utils.version_compare,d.each=s,d.type=c,d.canI=function(t,n,o){return d.version_compare(d.version,t)>=0?d.isFunction(n)&&n():d.isFunction(o)&&o(),d
},s(d,function(t,n){h[n]=t}),t.Box&&t.Box.$)for(var v in h)t.Box[v]=t.Box[v]||h[v];else t.Box=h}(window,document);